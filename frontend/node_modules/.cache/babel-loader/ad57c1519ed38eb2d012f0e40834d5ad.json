{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\birdtracker\\\\frontend\\\\src\\\\components\\\\FilterContainer.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Marker, InfoWindow, Polyline } from 'react-google-maps';\nimport polylineStyles from '../assets/polylineStyles';\n\nconst maps_icon = require('../assets/marker_icon.png');\n\nconst FilterContainer = props => {\n  const [filterBird, setFilterBird] = useState(props.birds);\n  const [filterPaths, setFilterPaths] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(null);\n\n  const fetchFilterData = () => {\n    let newList = [];\n\n    if (props.query != \"\") {\n      newList = props.birds.filter(bird => bird.name.includes(props.query));\n      setFilterBird(newList);\n    } else {\n      newList = props.birds;\n      setFilterBird(props.birds);\n    }\n\n    newList.map(bird => {\n      let paths = [];\n      let color = polylineStyles[bird.id];\n      bird.locations.map(location => {\n        paths = [...paths, (({\n          lat,\n          lng\n        }) => ({\n          lat,\n          lng\n        }))(location.coordinates)];\n      });\n      setFilterPaths(filterPaths => [...filterPaths, {\n        color,\n        paths\n      }]);\n    });\n  };\n\n  useEffect(() => {\n    setFilterPaths([]); // Initialize again, prevent append from previous list\n\n    fetchFilterData();\n    console.log(filterPaths);\n  }, [props.birds, props.query]); //Update when birds or query has changed\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, filterBird.map(bird => bird.locations.map((location, index) => /*#__PURE__*/React.createElement(Marker, {\n    key: index,\n    position: location.coordinates,\n    icon: {\n      url: maps_icon,\n      scaleSize: new window.google.maps.Size(8, 8)\n    },\n    onClick: () => {\n      setSelectedLocation(location);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 21\n    }\n  }))), selectedLocation && /*#__PURE__*/React.createElement(InfoWindow, {\n    position: selectedLocation.coordinates,\n    onCloseClick: () => {\n      setSelectedLocation(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"ID: \", selectedLocation.bird_id), /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"LOCATION: \", selectedLocation.coordinates.lat, \", \", selectedLocation.coordinates.lat))), filterPaths.map((path, index) => /*#__PURE__*/React.createElement(Polyline, {\n    key: index,\n    path: path.paths,\n    options: {\n      strokeColor: path.color,\n      strokeOpacity: 0.75,\n      strokeWeight: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default FilterContainer;","map":{"version":3,"sources":["C:/Projects/birdtracker/frontend/src/components/FilterContainer.js"],"names":["React","useState","useEffect","Marker","InfoWindow","Polyline","polylineStyles","maps_icon","require","FilterContainer","props","filterBird","setFilterBird","birds","filterPaths","setFilterPaths","selectedLocation","setSelectedLocation","fetchFilterData","newList","query","filter","bird","name","includes","map","paths","color","id","locations","location","lat","lng","coordinates","console","log","index","url","scaleSize","window","google","maps","Size","bird_id","path","strokeColor","strokeOpacity","strokeWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Marker, \r\n    InfoWindow,\r\n    Polyline} from 'react-google-maps';\r\nimport polylineStyles from '../assets/polylineStyles'\r\n\r\nconst maps_icon = require('../assets/marker_icon.png');\r\n\r\nconst FilterContainer = (props) =>{\r\n\r\n    const [filterBird, setFilterBird] = useState(props.birds);\r\n    const [filterPaths, setFilterPaths] = useState([]);\r\n    const [selectedLocation, setSelectedLocation] = useState(null);\r\n\r\n    const fetchFilterData = () =>{\r\n        let newList = [];\r\n        if(props.query != \"\"){\r\n            newList = props.birds.filter(bird => bird.name.includes(props.query));\r\n            setFilterBird(newList);\r\n        } else {\r\n            newList = props.birds;\r\n            setFilterBird(props.birds);\r\n        }\r\n        newList.map(bird => {\r\n            let paths = [];\r\n            let color = polylineStyles[bird.id];\r\n            bird.locations.map(location => {\r\n                paths = [...paths, \r\n                    (({lat, lng})=>({lat, lng}))(location.coordinates)];\r\n            });\r\n            setFilterPaths(filterPaths=> [...filterPaths, {color, paths}]);\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        setFilterPaths([]); // Initialize again, prevent append from previous list\r\n        fetchFilterData();\r\n        console.log(filterPaths);\r\n\r\n    },[props.birds, props.query]); //Update when birds or query has changed\r\n\r\n    return(\r\n        <div>\r\n            { filterBird.map(bird => (\r\n                bird.locations.map((location, index) => (\r\n                    <Marker key={index} \r\n                        position = {location.coordinates}\r\n                        icon = {{\r\n                            url: maps_icon,\r\n                            scaleSize: new window.google.maps.Size(8, 8)\r\n                        }}\r\n\r\n                        onClick = {() => {\r\n                            setSelectedLocation(location);\r\n                        }}\r\n                    />\r\n                ))\r\n            ))}\r\n\r\n            { selectedLocation && (\r\n                <InfoWindow\r\n                    position={\r\n                       selectedLocation.coordinates\r\n                    }\r\n                    onCloseClick = {()=>{\r\n                        setSelectedLocation(null);\r\n                    }}\r\n                >\r\n                <div>\r\n                <p>ID: {selectedLocation.bird_id}</p>\r\n                <h6>LOCATION: {selectedLocation.coordinates.lat}, {selectedLocation.coordinates.lat}</h6>\r\n                </div>\r\n                </InfoWindow>\r\n            )}\r\n\r\n            {filterPaths.map((path, index) => (\r\n                <Polyline key = {index}\r\n                    path = {path.paths}\r\n                    options = {{\r\n                        strokeColor: path.color,\r\n                        strokeOpacity: 0.75,\r\n                        strokeWeight: 2\r\n                    }}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FilterContainer;"]},"metadata":{},"sourceType":"module"}