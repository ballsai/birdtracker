{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\birdtracker\\\\frontend\\\\src\\\\component\\\\FilterContainer.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Marker, InfoWindow, Polyline } from 'react-google-maps';\n\nconst maps_icon = require('../assets/marker_icon.png');\n\nconst FilterContainer = props => {\n  const [filterBird, setFilterBird] = useState(props.birds);\n  const [filterPaths, setFilterPaths] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  const color = \"#ff2527\";\n  const test = {\n    \"001\": \"#ff2527\",\n    \"002\": \"#fff\"\n  };\n\n  const fetchFilterData = () => {\n    let newList = [];\n\n    if (props.query != \"\") {\n      newList = props.birds.filter(bird => bird.name.includes(props.query));\n      setFilterBird(newList);\n    } else {\n      newList = props.birds;\n      setFilterBird(props.birds);\n    }\n\n    newList.map(bird => {\n      let paths = [];\n      console.log('bird_id', test[bird.id]);\n      bird.locations.map(location => {\n        paths = [...paths, (({\n          lat,\n          lng\n        }) => ({\n          lat,\n          lng\n        }))(location.coordinates)];\n      });\n      setFilterPaths(filterPaths => [...filterPaths, {\n        color,\n        paths\n      }]);\n    });\n  };\n\n  useEffect(() => {\n    setFilterPaths([]); // Initialize again, prevent append from previous list\n\n    fetchFilterData();\n    console.log(filterPaths);\n  }, [props.birds, props.query]); //Update when birds or query has changed\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, filterBird.map(bird => bird.locations.map((location, index) => /*#__PURE__*/React.createElement(Marker, {\n    key: index,\n    position: location.coordinates,\n    icon: {\n      url: maps_icon,\n      scaleSize: new window.google.maps.Size(8, 8)\n    },\n    onClick: () => {\n      setSelectedLocation(location);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }))), selectedLocation && /*#__PURE__*/React.createElement(InfoWindow, {\n    position: selectedLocation.coordinates,\n    onCloseClick: () => {\n      setSelectedLocation(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, \"Bird's ID: \", selectedLocation.bird_id), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, selectedLocation.coordinates.lat, \", \", selectedLocation.coordinates.lat))), filterPaths.map((path, index) => /*#__PURE__*/React.createElement(Polyline, {\n    key: index,\n    path: path.paths,\n    options: {\n      strokeColor: path.color,\n      strokeOpacity: 0.75,\n      strokeWeight: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default FilterContainer;","map":{"version":3,"sources":["C:/Projects/birdtracker/frontend/src/component/FilterContainer.js"],"names":["React","useState","useEffect","Marker","InfoWindow","Polyline","maps_icon","require","FilterContainer","props","filterBird","setFilterBird","birds","filterPaths","setFilterPaths","selectedLocation","setSelectedLocation","color","test","fetchFilterData","newList","query","filter","bird","name","includes","map","paths","console","log","id","locations","location","lat","lng","coordinates","index","url","scaleSize","window","google","maps","Size","bird_id","path","strokeColor","strokeOpacity","strokeWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Marker, \r\n    InfoWindow,\r\n    Polyline} from 'react-google-maps';\r\n\r\nconst maps_icon = require('../assets/marker_icon.png');\r\n\r\nconst FilterContainer = (props) =>{\r\n\r\n    const [filterBird, setFilterBird] = useState(props.birds);\r\n    const [filterPaths, setFilterPaths] = useState([]);\r\n    const [selectedLocation, setSelectedLocation] = useState(null);\r\n\r\n    const color = \"#ff2527\";\r\n    const test = {\"001\":\"#ff2527\", \"002\":\"#fff\"}\r\n\r\n    const fetchFilterData = () =>{\r\n        let newList = [];\r\n        if(props.query != \"\"){\r\n            newList = props.birds.filter(bird => bird.name.includes(props.query));\r\n            setFilterBird(newList);\r\n        } else {\r\n            newList = props.birds;\r\n            setFilterBird(props.birds);\r\n        }\r\n        newList.map(bird => {\r\n            let paths = [];\r\n            console.log('bird_id', test[bird.id])\r\n            bird.locations.map(location => {\r\n                paths = [...paths, \r\n                    (({lat, lng})=>({lat, lng}))(location.coordinates)];\r\n            });\r\n            setFilterPaths(filterPaths=> [...filterPaths, {color, paths}]);\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        setFilterPaths([]); // Initialize again, prevent append from previous list\r\n        fetchFilterData();\r\n        console.log(filterPaths);\r\n\r\n    },[props.birds, props.query]); //Update when birds or query has changed\r\n\r\n    return(\r\n        <div>\r\n            { filterBird.map(bird => (\r\n                bird.locations.map((location, index) => (\r\n                    <Marker key={index} \r\n                        position = {location.coordinates}\r\n                        icon = {{\r\n                            url: maps_icon,\r\n                            scaleSize: new window.google.maps.Size(8, 8)\r\n                        }}\r\n\r\n                        onClick = {() => {\r\n                            setSelectedLocation(location);\r\n                        }}\r\n                    />\r\n                ))\r\n            ))}\r\n\r\n            { selectedLocation && (\r\n                <InfoWindow\r\n                    position={\r\n                       selectedLocation.coordinates\r\n                    }\r\n                    onCloseClick = {()=>{\r\n                        setSelectedLocation(null);\r\n                    }}\r\n                >\r\n                <div>\r\n                <h3>Bird's ID: {selectedLocation.bird_id}</h3>\r\n                <h3>{selectedLocation.coordinates.lat}, {selectedLocation.coordinates.lat}</h3>\r\n                </div>\r\n                </InfoWindow>\r\n            )}\r\n\r\n            {filterPaths.map((path, index) => (\r\n                <Polyline key = {index}\r\n                    path = {path.paths}\r\n                    options = {{\r\n                        strokeColor: path.color,\r\n                        strokeOpacity: 0.75,\r\n                        strokeWeight: 2\r\n                    }}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FilterContainer;"]},"metadata":{},"sourceType":"module"}