{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\birdtracker\\\\frontend\\\\src\\\\component\\\\FilterContainer.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Marker, InfoWindow, Polyline } from 'react-google-maps';\n\nconst FilterContainer = props => {\n  const [filterBird, setFilterBird] = useState(props.birds);\n  const [filterPaths, setFilterPaths] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(null);\n\n  const filterData = () => {\n    let newList = [];\n\n    if (props.query != \"\") {\n      newList = props.birds.filter(bird => bird.name.includes(props.query));\n      setFilterBird(newList);\n    } else {\n      newList = props.birds;\n      setFilterBird(props.birds);\n    }\n\n    newList.map(bird => {\n      let newLocations = [];\n      bird.locations.map(location => {\n        newLocations = [...newLocations, (({\n          lat,\n          lng\n        }) => ({\n          lat,\n          lng\n        }))(location.coordinates)];\n      });\n      setFilterPaths(filterPaths => [...filterPaths, newLocations]);\n    });\n  };\n\n  useEffect(() => {\n    setFilterPaths([]); // Initialize again, prevent append from previous list\n\n    filterData();\n    console.log(filterPaths);\n  }, [props.birds, props.query]); //Update when birds or query change\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, filterBird.map(bird => bird.locations.map((location, index) => /*#__PURE__*/React.createElement(Marker, {\n    key: index,\n    position: location.coordinates,\n    onClick: () => {\n      setSelectedLocation(location);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 21\n    }\n  }))), selectedLocation && /*#__PURE__*/React.createElement(InfoWindow, {\n    position: selectedLocation.coordinates,\n    onCloseClick: () => {\n      setSelectedPosition(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, selectedLocation.coordinates.lat, \" \", selectedLocation.coordinates.lat))), filterPaths.map((path, index) => /*#__PURE__*/React.createElement(Polyline, {\n    key: index,\n    path: path,\n    options: {\n      strokeColor: \"#ff2527\",\n      strokeOpacity: 0.75,\n      strokeWeight: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  })));\n};\n\nexport default FilterContainer;","map":{"version":3,"sources":["C:/Projects/birdtracker/frontend/src/component/FilterContainer.js"],"names":["React","useState","useEffect","Marker","InfoWindow","Polyline","FilterContainer","props","filterBird","setFilterBird","birds","filterPaths","setFilterPaths","selectedLocation","setSelectedLocation","filterData","newList","query","filter","bird","name","includes","map","newLocations","locations","location","lat","lng","coordinates","console","log","index","setSelectedPosition","path","strokeColor","strokeOpacity","strokeWeight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n    Marker, \r\n    InfoWindow,\r\n    Polyline} from 'react-google-maps';\r\n\r\nconst FilterContainer = (props) =>{\r\n\r\n    const [filterBird, setFilterBird] = useState(props.birds);\r\n    const [filterPaths, setFilterPaths] = useState([]);\r\n    const [selectedLocation, setSelectedLocation] = useState(null);\r\n\r\n    const filterData = () =>{\r\n        let newList = [];\r\n        if(props.query != \"\"){\r\n            newList = props.birds.filter(bird => bird.name.includes(props.query));\r\n            setFilterBird(newList);\r\n        } else {\r\n            newList = props.birds;\r\n            setFilterBird(props.birds);\r\n        }\r\n        \r\n        newList.map(bird => {\r\n            let newLocations = [];\r\n            bird.locations.map(location => {\r\n                newLocations = [...newLocations, \r\n                    (({lat, lng})=>({lat, lng}))(location.coordinates)];\r\n            });\r\n            setFilterPaths(filterPaths=> [...filterPaths, newLocations]);\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        setFilterPaths([]); // Initialize again, prevent append from previous list\r\n        filterData();\r\n\r\n        console.log(filterPaths);\r\n\r\n    },[props.birds, props.query]); //Update when birds or query change\r\n\r\n    return(\r\n        <div>\r\n            { filterBird.map(bird => (\r\n                bird.locations.map((location, index) => (\r\n                    <Marker key={index} \r\n                        position = {location.coordinates}\r\n\r\n                        onClick = {() => {\r\n                            setSelectedLocation(location);\r\n                        }}\r\n                    />\r\n                ))\r\n            ))}\r\n\r\n            { selectedLocation && (\r\n                <InfoWindow\r\n                    position={\r\n                       selectedLocation.coordinates\r\n                    }\r\n                    onCloseClick = {()=>{\r\n                        setSelectedPosition(null);\r\n                    }}\r\n                >\r\n                <div>\r\n                <p>{selectedLocation.coordinates.lat} {selectedLocation.coordinates.lat}</p>\r\n                </div>\r\n                </InfoWindow>\r\n            )}\r\n\r\n            {filterPaths.map((path, index) => (\r\n                <Polyline key = {index}\r\n                    path = {path}\r\n                    options = {{\r\n                        strokeColor: \"#ff2527\",\r\n                        strokeOpacity: 0.75,\r\n                        strokeWeight: 2\r\n                    }}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default FilterContainer;"]},"metadata":{},"sourceType":"module"}